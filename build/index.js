(()=>{"use strict";var e,t={488:(e,t,r)=>{const a=window.wp.blocks;function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n.apply(null,arguments)}const s=window.React;var l=r.n(s);const o=window.wp.blockEditor,i=window.wp.element,c=window.wp.components,p=window.wp.data,d=window.wp.coreData,u=({posts:e,currentPage:t,setCurrentPage:r})=>l().createElement("div",{className:"pagination"},l().createElement(c.Button,{disabled:1===t,onClick:()=>r((e=>e-1))},"Prev"),l().createElement("span",null,"Page ",t),l().createElement(c.Button,{disabled:e.length<10,onClick:()=>r((e=>e+1))},"Next")),m=({posts:e,isLoading:t,currentPage:r,setCurrentPage:a,onSelectPost:n})=>t?l().createElement("div",{style:{marginTop:"10px"}},l().createElement(c.Spinner,null)):t||e&&0!==e.length?l().createElement("div",null,l().createElement("p",null,"Results:"),l().createElement("div",{className:"post-list"},(e||[]).map((e=>l().createElement("div",{key:e.id,className:"post-list-item"},l().createElement(c.Button,{onClick:()=>n(e),className:"post-button"},e.title.rendered))))),e.length>1&&l().createElement(u,{posts:e,currentPage:r,setCurrentPage:a})):l().createElement("p",{style:{marginTop:"10px"}},"Sorry, nothing found."),g=({inputValue:e,setInputValue:t,onSearch:r})=>l().createElement(l().Fragment,null,l().createElement("label",{htmlFor:"dmg-post-search",className:"screen-reader-text"},"Search Posts"),l().createElement("p",{id:"dmg-post-search-help"},"Type your search and press Enter or click Search. If empty, showing the last posts by default"),l().createElement("div",{className:"search-container"},l().createElement(c.TextControl,{id:"dmg-post-search",value:e,onChange:t,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),r())},placeholder:"Search posts by title or ID","aria-describedby":"dmg-post-search-help"}),l().createElement(c.Button,{size:"small",variant:"primary",onClick:r,"aria-label":"Search posts",style:{whiteSpace:"nowrap"}},"Search"))),h=({attributes:e,setAttributes:t})=>{const{postId:r}=e,[a,n]=(0,i.useState)(""),[s,u]=(0,i.useState)(""),[h,E]=(0,i.useState)(1),v=(0,i.useMemo)((()=>/^\d+$/.test(s.trim())),[s]);(0,i.useEffect)((()=>{E(1)}),[s]);const b=(0,i.useMemo)((()=>v?{include:[parseInt(s,10)],per_page:10,page:h}:{search:s,per_page:10,page:h}),[s,h,v]),{posts:f,isLoading:w}=(0,p.useSelect)((e=>{const t=e(d.store);return{posts:t.getEntityRecords("postType","post",b),isLoading:t.isResolving("getEntityRecords",["postType","post",b])}}),[b]);return(0,i.useEffect)((()=>{if(f&&f.length>0&&!r){const e=f[0];t({postId:e.id,postTitle:e.title.rendered,postPermalink:e.link})}}),[f,r,t]),l().createElement(o.InspectorControls,null,l().createElement(c.PanelBody,{title:"Select a post",initialOpen:!0},l().createElement(g,{inputValue:a,setInputValue:n,onSearch:()=>{u(a.trim())}}),l().createElement(m,{posts:f,isLoading:w,currentPage:h,setCurrentPage:E,onSelectPost:e=>{t({postId:e.id,postTitle:e.title.rendered,postPermalink:e.link})}})))};(0,a.registerBlockType)("dmg-tt/dmg-post-link",{edit:({attributes:e,setAttributes:t})=>{const{postTitle:r,postPermalink:a}=e,s=(0,o.useBlockProps)();return l().createElement(l().Fragment,null,l().createElement(h,{attributes:e,setAttributes:t}),l().createElement("div",n({className:"editor-post-featured-image__preview"},s),r&&a&&l().createElement("p",{className:"dmg-read-more"},"Read More:",l().createElement("a",{title:"Read {postTitle}",href:a},r))))},save:({attributes:e})=>{const{postPermalink:t,postTitle:r}=e;return React.createElement("p",{className:"dmg-read-more"},"Read More: ",React.createElement("a",{title:`Read ${r}`,href:t,"aria-label":`Read more about ${r}`},r))}})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,r,n,s)=>{if(!r){var l=1/0;for(p=0;p<e.length;p++){for(var[r,n,s]=e[p],o=!0,i=0;i<r.length;i++)(!1&s||l>=s)&&Object.keys(a.O).every((e=>a.O[e](r[i])))?r.splice(i--,1):(o=!1,s<l&&(l=s));if(o){e.splice(p--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[r,n,s]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,s,[l,o,i]=r,c=0;if(l.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var p=i(a)}for(t&&t(r);c<l.length;c++)s=l[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(p)},r=globalThis.webpackChunkdmg_tt=globalThis.webpackChunkdmg_tt||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[350],(()=>a(488)));n=a.O(n)})();